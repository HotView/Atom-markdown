## 持久化
程序一般都是瞬态的，因为它们会在短暂的时间里运行出一些输出，但当运行结束后，它们的数据都会消失。如果再次运行程序，它们会再次全新的开始。

持久化程序的例子包括操作系统，他几乎运行在所有的电脑中，以及web服务器，它们通常持续运行，等待网络连上的请求。

读写文本文件是程序维护数据最简单的方法之一。我们已经见过读取文本的程序；

另一种办法是==将程序的状态保存到数据库中。==

我们将介绍一个数据库，和一个模块，pickle，用来简化程序数据的存储。
## 数据库
数据库是一个有组织的用于存储数据的文件。大部分数据库都像字典一样组织数据，因为它们也将键映射到值上。最大区别是数据库是保存在磁盘上的，所以当程序结束时它是也能持续存在。

模块anydbm提供了接口用于创建和更新数据库文件。作为示例，我们将会创建一个数据库保存图片文件的标题：
```python
import anydbm
db  = anydbm.open('caption.db','c')
db['clesse.png'] = 'Photo of John Cleese'
```
很多字典方法，比如keys和items，对数据库对象也可以使用。这也包括使用for循环来迭代遍历。
```
for key in db:
	print key
```
和其他文件一样，当操作结束时，你需要关闭数据库：`db.close()`
## 管道
大部分操作系统都提供了命令行接口，也称为==字符界面（shell）==。字符界面通常会提供命令来浏览文件系统和启动应用程序。

例如，在Unix中，你可以使用cd来更换目录，使用ls来展示目录内容，以及firefox来启动浏览器。

任何在字符界面能启动的程序都可以在Python中通过管道（pipe）来启动。管道是代表一个正在运行的程序的对象。
Unix命令`ls -l`展示当前内容。你可以使用os.popen【popen现在计划已经停止了，现在开始使用subprocess模块。】来启动ls：
```python
cmd = 'ls -l'
fp = os.popen(cmd)
```
返回值是一个和打开文件差不多的对象。你可以使用readline来逐行读取ls进程的输出，或者使用read一次读取所有的输出

当你完成时，可以像文件一样关闭这个管道：`stat  = fp.close()`
> Written with [StackEdit](https://stackedit.io/).
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTEwMzk2NzMyNl19
-->